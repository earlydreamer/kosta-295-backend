<!DOCTYPE html>
<html lang="ko-kr">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>

<body>
    <h1> 비동기 통신</h1>
    <script>

        const test = async function () {
            try {
                let response = await fetch("https://jsonplaceholder.typicode.com/users/");
                if (!response.ok) {
                    throw new Error("에러 발생"+ response.status);
                }
                let result = await response.json();
                result.forEach(element => {
                    console.log("element=", element);
                    console.log("id = ", element.id);
                    console.log("name = ", element.name);
                    console.log("email = ", element.email);
                    console.log("address = ", element.address);
                    console.log("phone = ", element.phone);
                });
            } catch (err){
                console.log(err); //promise가 reject되면 catch로 넘어감
            }
        }

        test();
        console.log("---test---")

    </script>

</body>

</html>